version: "3.8"
services:
  portal-api:
    build: ./portal/backend
    ports:
      - "4000:4000"
    volumes:
      - ./portal/backend/data:/app/data
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - HOST_DATA_DIR=${PWD}/portal/backend/data
  portal-frontend:
    build: ./portal/frontend
    ports:
      - "3000:80"
    depends_on:
      - portal-api
